name: Terraform Prepare
description: Prepare workspace for Terraform

runs:
  using: composite
  steps:
    - run: terraform-bin init
      shell: bash
      working-directory: "${{ github.action_path }}"
    - run: terraform-bin plan -var=workspace=$TF_WORKSPACE -var=cloud_organization=$TF_CLOUD_ORGANIZATION
      shell: bash
      working-directory: "${{ github.action_path }}"
    # - run: cp backend.tf "${{ github.workspace }}"
    #   shell: bash
    #   working-directory: "${{ github.action_path }}"